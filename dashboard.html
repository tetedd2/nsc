<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üíº ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å - MoneySkillz</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="dashboard.css">
  <link rel="stylesheet" href="theme-darkmode.css">
  <style>
    /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡πÑ‡∏≠‡πÄ‡∏ó‡πá‡∏°‡∏ó‡∏µ‡πà‡∏ã‡∏∑‡πâ‡∏≠‡πÅ‡∏•‡πâ‡∏ß */
    .purchased-items-container {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      justify-content: center;
      padding: 10px 0;
    }
    .purchased-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      background-color: var(--card-bg-color);
      padding: 10px;
      border-radius: 10px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
      width: 100px;
      text-align: center;
    }
    .purchased-icon {
      font-size: 2.5em;
    }
    .purchased-name {
      font-size: 0.9em;
      margin-top: 5px;
      font-weight: 500;
    }
    .shop-items-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
      gap: 15px;
    }
    .placeholder-message {
      width: 100%;
      text-align: center;
      color: #888;
      padding: 20px 0;
    }
    .shop-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 10px;
        border: 1px solid #e0e0e0;
        border-radius: 8px;
        text-align: center;
        background-color: #fff;
    }
    .item-icon { font-size: 2em; margin-bottom: 5px; }
    .item-name { font-weight: 600; margin-bottom: 5px; }
    .item-price { margin-bottom: 10px; color: #555; }
    .shop-item button { 
        width: 100%; 
        padding: 8px; 
        border: none;
        border-radius: 5px;
        background-color: #28a745;
        color: white;
        cursor: pointer;
    }
    .shop-item button.cannot-afford, .shop-item button:disabled {
        background-color: #ccc;
        cursor: not-allowed;
    }
  </style>
</head>
<body>
  <div id="main-page" class="nav-page active">
    <header class="header">
      <h1>MoneySkillz</h1>
      <p>‡∏≠‡∏≠‡∏°‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ ‡πÄ‡∏Å‡πà‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏ß‡∏±‡∏ô‡∏´‡∏ô‡πâ‡∏≤!</p>
      <div class="avatar-box">
        <img id="profilePicture" src="https://cdn-icons-png.flaticon.com/512/4712/4712035.png" alt="Avatar">
      </div>
    </header>

    <div class="container user-info">
      <div id="usernameDisplay" class="username-display"></div>
      <div class="user-level" id="userLevel">Level - ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</div>
      <p class="quote" id="userQuote">"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏≥‡∏Ñ‡∏°..."</p>
      <div class="progress-section">
        <div class="progress-outer">
          <div class="progress-inner" id="userProgress">
            <span class="progress-text" id="progressValue">0%</span>
          </div>
        </div>
        <p class="xp-text">
          ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô XP: <span id="currentXP">0</span> / <span id="nextLevelXP">0</span>
        </p>
      </div>
    </div>
    
    <!-- ‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏ó‡∏µ‡πà‡∏ã‡∏∑‡πâ‡∏≠‡πÅ‡∏•‡πâ‡∏ß -->
    <div class="container card-section">
      <h2><span class="icon">üèÜ</span> ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</h2>
      <div id="purchasedItemsContainer" class="purchased-items-container">
        <p class="placeholder-message">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•</p>
      </div>
      <!-- ‡∏¢‡πâ‡∏≤‡∏¢‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏°‡∏≤‡πÑ‡∏ß‡πâ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
      <div class="summary-item" style="margin-top: 15px; text-align: right; border-top: 1px solid #eee; padding-top: 10px;">
        <strong>‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠:</strong> <span class="amount" id="userCoins">0</span> ü™ô
      </div>
    </div>

    <!-- ‡∏™‡πà‡∏ß‡∏ô‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤ (‡∏ã‡πà‡∏≠‡∏ô‡πÑ‡∏ß‡πâ) -->
    <div class="container card-section" style="display: none;">
      <h2><span class="icon">üõí</span> ‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</h2>
      <div id="shopItemsRow" class="shop-items-grid">
         <!-- ‡πÑ‡∏≠‡πÄ‡∏ó‡πá‡∏°‡πÉ‡∏ô‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏î‡∏¢ JavaScript -->
      </div>
    </div>


    <div class="container card-section">
      <h2><span class="icon">üí∞</span> ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô</h2>
      <div class="summary-item income">
        <strong>‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö:</strong> <span class="amount" id="income">0.00 ‡∏ø</span>
      </div>
      <div class="summary-item expense">
        <strong>‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢:</strong> <span class="amount" id="expense">0.00 ‡∏ø</span>
      </div>
      <div class="summary-item balance">
        <strong>‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠:</strong> <span class="amount" id="balance">0.00 ‡∏ø</span>
      </div>
    </div>

    <div class="container main-menu-grid">
      <div class="menu-card" onclick="location.href='add-transaction.html'">
        <span style="font-size:2.1em;">üìù</span>
        <p>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</p>
      </div>
      <div class="menu-card" onclick="location.href='add-goal.html'">
        <span style="font-size:2.1em;">üéØ</span>
        <p>‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢</p>
      </div>
      <div class="menu-card" onclick="location.href='graph.html'">
        <span style="font-size:2.1em;">üìà</span>
        <p>‡∏Å‡∏£‡∏≤‡∏ü‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô</p>
      </div>
      <div class="menu-card" onclick="location.href='lesson.html'">
        <span style="font-size:2.1em;">üìö</span>
        <p>‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</p>
      </div>
      <div class="menu-card" onclick="location.href='friend.html'">
        <span style="font-size:2.1em;">üßë‚Äçü§ù‚Äçüßë</span>
        <p>‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô</p>
      </div>
      <div class="menu-card" onclick="location.href='chat.html'">
        <span style="font-size:2.1em;">üí¨</span>
        <p>‡πÄ‡πÄ‡∏ä‡∏ó‡∏Å‡∏±‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô</p>
      </div>
    </div>
    <div class="menu-card" onclick="location.href='shop.html'">
        <span style="font-size:2.1em;">üõí</span>
        <p>‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</p>
    </div>

    <div id="goalDisplay" class="container card-section">
      <h2><span class="icon">üéØ</span> ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</h2>
      <div class="goal-navigation">
        <button id="prevGoal" class="goal-nav-btn">&#8249;</button>
        <div id="goalDetails">
          <p class="no-goal-message" id="noGoalMsg">- ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏ß‡πâ -</p>
          <h3 id="goalTitle" style="display:none;">-</h3>
          <div class="goal-progress-bar-container" style="display:none;">
            <div id="goalProgressBar" class="goal-progress-bar">0%</div>
          </div>
          <p id="goalAmount" style="display:none;">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: 0.00 ‡∏ø</p>
          <p id="goalSavings" style="display:none;">‡∏≠‡∏≠‡∏°‡πÅ‡∏•‡πâ‡∏ß: 0.00 ‡∏ø</p>
          <p id="goalDueDate" style="display:none;">‡∏Å‡∏≥‡∏´‡∏ô‡∏î: -</p>
        </div>
        <button id="nextGoal" class="goal-nav-btn">&#8250;</button>
      </div>
    </div>

    <div class="container card-section">
      <h2><span class="icon">üßæ</span> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h2>
      <div id="transactionsContainer">
        <p class="no-transactions-message">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ</p>
      </div>
    </div>
  </div>

  <div id="goalModal" class="modal">
    <div class="modal-content">
      <span class="close-button" onclick="closeGoalModal()">&times;</span>
      <h2>‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÉ‡∏´‡∏°‡πà</h2>
      <form id="goalForm">
        <input type="text" id="goalNameInput" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ (‡πÄ‡∏ä‡πà‡∏ô ‡∏ã‡∏∑‡πâ‡∏≠‡∏à‡∏±‡∏Å‡∏£‡∏¢‡∏≤‡∏ô)" required>
        <input type="number" id="goalTargetAmount" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢" required>
        <input type="number" id="goalCurrentSavings" placeholder="‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)" value="0">
        <label for="goalDueDateInput">‡∏ß‡∏±‡∏ô‡∏Ñ‡∏£‡∏ö‡∏Å‡∏≥‡∏´‡∏ô‡∏î (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ):</label>
        <input type="date" id="goalDueDateInput">
        <button type="submit">‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢</button>
      </form>
      <div id="goalMessage" class="message-div"></div>
    </div>
  </div>

  <div class="ai-chat-btn" onclick="document.getElementById('aiChatBox').style.display='flex'">
    <span>ü§ñ</span>
  </div>
  <div id="aiChatBox">
    <div class="chat-header">
      <b>AI ‡∏ú‡∏π‡πâ‡∏ä‡πà‡∏ß‡∏¢‡πÇ‡∏Ñ‡πâ‡∏ä‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô</b>
      <span class="chat-close-btn" onclick="document.getElementById('aiChatBox').style.display='none'">‚úñÔ∏è</span>
    </div>
    <div id="aiChatHistory">
      <div class="chat-message ai">‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö! ‡∏ú‡∏°‡∏Ñ‡∏∑‡∏≠ AI ‡∏ú‡∏π‡πâ‡∏ä‡πà‡∏ß‡∏¢‡πÇ‡∏Ñ‡πâ‡∏ä‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô ‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡πÉ‡∏´‡πâ‡∏ä‡πà‡∏ß‡∏¢‡πÑ‡∏´‡∏°‡∏Ñ‡∏£‡∏±‡∏ö?</div>
    </div>
    <form id="aiChatForm">
      <input id="aiChatInput" autocomplete="off" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°..." />
      <button type="submit">‡∏™‡πà‡∏á</button>
    </form>
  </div>

  <nav class="bottom-nav">
    <a href="#" class="bottom-nav-item active">
      <span>üè†</span><p>‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</p>
    </a>
    <a href="game-mode.html" class="bottom-nav-item">
      <span>üéÆ</span><p>‡πÄ‡∏Å‡∏°</p>
    </a>
    <a href="settings.html" class="bottom-nav-item">
      <span>‚öôÔ∏è</span><p>‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</p>
    </a>
  </nav>

  <script type="module" src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
  <script type="module" src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js"></script>
  <script type="module" src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js"></script>
  <script type="module" src="https://www.gstatic.com/firebasejs/9.6.1/firebase-storage.js"></script>
  
  <script type="module" src="dashboard.js" defer></script>
  <script src="darkmode-toggle.js"></script>
  <link rel="stylesheet" href="exit-app.css">
  <script src="exit-app.js"></script>
</body>
</html>
